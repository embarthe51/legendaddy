<div class="activity-content">
  <div class="box-description">
    <div class="activity-image">
      <% if @activity.photos.any? %>
        <%= cl_image_tag(@activity.photos.first.key, width: 350, height: 300, crop: :fill, gravity: :center) %>
      <% else %>
        <%= image_tag 'papa.jpeg', width: 350, height: 300 %>
      <% end %>
    </div>
    <h2 class="secondary_title"><%= @activity.title %></h2>
    <div class="info-card">
       <%= render 'reviews' %>
      <h6 class="font-style"><i class="fa-solid fa-location-dot"></i> : <%= @activity.address%></h6>
      <br>
      <i class="fa-solid fa-link"></i> : <%= link_to 'Site web', @activity.url %>
      <br>
      <br>
      <% if @activity.price_cents %>
        <p><i class="fa-solid fa-money-check"></i> : <%= @activity.price_cents.to_i %>€</p>
      <% end %>

          <p><i class="fa-solid fa-circle-info"></i> : <%= @activity.description %></p>
      <div>
        <p><%= sanitize @activity.formated_open_times %></p>
      </div>
          </div>

<!-- Button trigger modal -->
    <button type="button" class="blue-button" data-bs-toggle="modal" data-bs-target="#exampleModal">
      Je réserve
    </button>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header legend-form-container">
            <h5 class="modal-title" id="exampleModalLabel">Réservation</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
          <p>Confirmez votre activité: </p>
            <section class="legend-form-container">
              <p><%= sanitize @activity.formated_open_times %></p>
            </section>

            <section class="legend-form-container">
              <div class="d-flex flex-column justify-content-center">
                <p>Votre reservation pour le <strong><%=@user_availability.start_at.strftime('%d/%m/%Y')%></strong></p>
                <p>de <strong><%=@user_availability.start_at.strftime('%H h %M')%></strong> a <strong><%=@user_availability.end_at.strftime('%H h %M')%></strong></p>

                <%= simple_form_for [@activity, @booking] do |form| %>
                  <p>Pour qui ?</p>
                  <%= form.input :kid, collection: @kids_and_ids %>
                  <%= form.submit %>
                <% end %>
              </div>
          </section>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
          </div>
        </div>
      </div>
    </div>
  </div>
    <div class="map" style="width: 100%; height: 600px;"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>
</div>
